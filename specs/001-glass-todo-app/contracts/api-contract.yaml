# GlassFlow Todo API Contract

## Authentication API

### POST /api/auth/register
Register a new user account.

**Request Body**:
```json
{
  "email": "user@example.com",
  "password": "securePassword123"
}
```

**Response**:
- 201 Created: User registered successfully
```json
{
  "id": "uuid-string",
  "email": "user@example.com",
  "created_at": "2023-01-01T00:00:00Z"
}
```
- 400 Bad Request: Invalid input data
- 409 Conflict: User already exists

### POST /api/auth/login
Authenticate user and return JWT token.

**Request Body**:
```json
{
  "email": "user@example.com",
  "password": "securePassword123"
}
```

**Response**:
- 200 OK: Login successful
```json
{
  "access_token": "jwt-token-string",
  "token_type": "bearer",
  "user": {
    "id": "uuid-string",
    "email": "user@example.com"
  }
}
```
- 401 Unauthorized: Invalid credentials

## Tasks API

### GET /api/users/{user_id}/tasks
Retrieve all tasks for a specific user.

**Headers**:
- Authorization: Bearer {jwt_token}

**Path Parameters**:
- user_id: UUID of the user

**Query Parameters**:
- completed: boolean (optional) - Filter by completion status
- important: boolean (optional) - Filter by important status
- priority: string (optional) - Filter by priority level
- limit: integer (optional) - Number of tasks to return
- offset: integer (optional) - Offset for pagination

**Response**:
- 200 OK: Tasks retrieved successfully
```json
{
  "tasks": [
    {
      "id": "uuid-string",
      "title": "Task title",
      "description": "Task description",
      "due_date": "2023-12-31T23:59:59Z",
      "is_completed": false,
      "is_important": true,
      "priority": "medium",
      "created_at": "2023-01-01T00:00:00Z",
      "updated_at": "2023-01-01T00:00:00Z"
    }
  ],
  "total": 1
}
```
- 401 Unauthorized: Invalid or expired token
- 403 Forbidden: User ID doesn't match authenticated user
- 404 Not Found: User not found

### POST /api/users/{user_id}/tasks
Create a new task for the user.

**Headers**:
- Authorization: Bearer {jwt_token}

**Path Parameters**:
- user_id: UUID of the user

**Request Body**:
```json
{
  "title": "New task title",
  "description": "Task description (optional)",
  "due_date": "2023-12-31T23:59:59Z (optional)",
  "is_important": false,
  "priority": "medium"
}
```

**Response**:
- 201 Created: Task created successfully
```json
{
  "id": "uuid-string",
  "title": "New task title",
  "description": "Task description (optional)",
  "due_date": "2023-12-31T23:59:59Z",
  "is_completed": false,
  "is_important": false,
  "priority": "medium",
  "created_at": "2023-01-01T00:00:00Z",
  "updated_at": "2023-01-01T00:00:00Z",
  "user_id": "uuid-string"
}
```
- 400 Bad Request: Invalid input data
- 401 Unauthorized: Invalid or expired token
- 403 Forbidden: User ID doesn't match authenticated user

### GET /api/users/{user_id}/tasks/{task_id}
Retrieve a specific task.

**Headers**:
- Authorization: Bearer {jwt_token}

**Path Parameters**:
- user_id: UUID of the user
- task_id: UUID of the task

**Response**:
- 200 OK: Task retrieved successfully
```json
{
  "id": "uuid-string",
  "title": "Task title",
  "description": "Task description",
  "due_date": "2023-12-31T23:59:59Z",
  "is_completed": false,
  "is_important": true,
  "priority": "medium",
  "created_at": "2023-01-01T00:00:00Z",
  "updated_at": "2023-01-01T00:00:00Z",
  "user_id": "uuid-string"
}
```
- 401 Unauthorized: Invalid or expired token
- 403 Forbidden: User ID doesn't match authenticated user
- 404 Not Found: Task not found

### PUT /api/users/{user_id}/tasks/{task_id}
Update an existing task.

**Headers**:
- Authorization: Bearer {jwt_token}

**Path Parameters**:
- user_id: UUID of the user
- task_id: UUID of the task

**Request Body**:
```json
{
  "title": "Updated task title",
  "description": "Updated description",
  "due_date": "2023-12-31T23:59:59Z",
  "is_important": true,
  "priority": "high"
}
```

**Response**:
- 200 OK: Task updated successfully
```json
{
  "id": "uuid-string",
  "title": "Updated task title",
  "description": "Updated description",
  "due_date": "2023-12-31T23:59:59Z",
  "is_completed": false,
  "is_important": true,
  "priority": "high",
  "created_at": "2023-01-01T00:00:00Z",
  "updated_at": "2023-01-02T00:00:00Z",
  "user_id": "uuid-string"
}
```
- 400 Bad Request: Invalid input data
- 401 Unauthorized: Invalid or expired token
- 403 Forbidden: User ID doesn't match authenticated user
- 404 Not Found: Task not found

### DELETE /api/users/{user_id}/tasks/{task_id}
Delete a task.

**Headers**:
- Authorization: Bearer {jwt_token}

**Path Parameters**:
- user_id: UUID of the user
- task_id: UUID of the task

**Response**:
- 204 No Content: Task deleted successfully
- 401 Unauthorized: Invalid or expired token
- 403 Forbidden: User ID doesn't match authenticated user
- 404 Not Found: Task not found

### PATCH /api/users/{user_id}/tasks/{task_id}/complete
Toggle task completion status.

**Headers**:
- Authorization: Bearer {jwt_token}

**Path Parameters**:
- user_id: UUID of the user
- task_id: UUID of the task

**Request Body**:
```json
{
  "is_completed": true
}
```

**Response**:
- 200 OK: Task completion status updated
```json
{
  "id": "uuid-string",
  "is_completed": true,
  "updated_at": "2023-01-02T00:00:00Z"
}
```
- 400 Bad Request: Invalid input data
- 401 Unauthorized: Invalid or expired token
- 403 Forbidden: User ID doesn't match authenticated user
- 404 Not Found: Task not found